(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,,function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(7),c=a.n(o),r=a(2),m=a.n(r),l=a(4),i=a(1),u=a(5),p=a.n(u),d=(a(14),function(){return s.a.createElement("div",{className:"Loader"},s.a.createElement("div",{className:"Loader__content"}))}),b=a(3),f=a.n(b),E=(f.a.shape({id:f.a.number.isRequired,userId:f.a.number.isRequired,title:f.a.string.isRequired,body:f.a.string.isRequired}),"https://mate.academy/students-api"),h=function(e){return fetch("".concat(E,"/comments?postId=").concat(e)).then((function(e){return e.json()})).catch((function(e){return e}))};var v=function(e){var t=e.post,a=e.postId,n=e.changeSidebarVisibility,o=e.setPostComments,c=e.changeCommentsLoaded,r=t.userId,i=t.title,u=t.id;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("b",null,"[User # ".concat(r,"]: ")),i),s.a.createElement("button",{type:"button",className:"postsList__button button",onClick:Object(l.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u),c(!1),e.next=4,h(u).then(o);case 4:c(!0);case 5:case"end":return e.stop()}}),e)})))},a===u?"Close":"Open"))},_=(a(17),function(e){var t=e.posts,a=e.postId,n=e.changeSidebarVisibility,o=e.setPostComments,c=e.changeCommentsLoaded;return s.a.createElement("div",{className:"postsList"},s.a.createElement("h2",null,"Posts:"),s.a.createElement("ul",{className:"postsList__list"},t.map((function(e){return s.a.createElement("li",{className:"postsList__item",key:e.id},s.a.createElement(v,{post:e,postId:a,changeSidebarVisibility:n,setPostComments:o,changeCommentsLoaded:c}))}))))}),C=(a(18),function(e){var t=e.postId,a=e.setPostComments,o=Object(n.useState)(""),c=Object(i.a)(o,2),r=c[0],m=c[1],l=Object(n.useState)(""),u=Object(i.a)(l,2),p=u[0],d=u[1],b=Object(n.useState)(""),f=Object(i.a)(b,2),v=f[0],_=f[1];return s.a.createElement("form",{className:"newCommentForm",onSubmit:function(e){var n;e.preventDefault(),(n={name:r,postId:t,email:p,body:v},fetch("".concat(E,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n)})).then((function(e){return h(t).then(a)}))}},s.a.createElement("div",{className:"form-field"},s.a.createElement("input",{type:"text",name:"name",placeholder:"Your name",className:"newCommentForm__input",required:!0,value:r,onChange:function(e){return m(e.target.value)}})),s.a.createElement("div",{className:"form-field"},s.a.createElement("input",{type:"email",name:"email",placeholder:"Your email",className:"newCommentForm__input",required:!0,value:p,onChange:function(e){return d(e.target.value)}})),s.a.createElement("div",{className:"form-field"},s.a.createElement("textarea",{name:"body",placeholder:"Type comment here",className:"newCommentForm__input newCommentForm__textarea",required:!0,value:v,onChange:function(e){return _(e.target.value)}})),s.a.createElement("button",{type:"submit",className:"newCommentForm__submit-button button"},"Add a comment"))}),N=(a(19),function(e){var t=e.postComments,a=e.postId,o=e.postBody,c=e.setPostComments,r=e.isCommentsLoaded,m=Object(n.useState)(!1),l=Object(i.a)(m,2),u=l[0],b=l[1];return s.a.createElement("div",{className:"postDetails"},s.a.createElement("h2",null,"Post details:"),s.a.createElement("section",{className:"postDetails__post"},s.a.createElement("p",null,o)),s.a.createElement("section",{className:"postDetails__comments"},s.a.createElement("button",{type:"button",className:"button postDetails__button",onClick:function(){b(!u)}},u?"Show ".concat(t.length," comment(s)"):"Hide ".concat(t.length," comment(s)")),s.a.createElement("ul",{className:p()({postDetails__list:!0,hidden:u})},r?t.map((function(e){return s.a.createElement("li",{key:e.id,className:"postDetails__list-item"},s.a.createElement("button",{type:"button",className:"postDetails__remove-button button",onClick:function(){return(t=e.id,fetch("".concat(E,"/comments/").concat(t),{method:"DELETE"})).then((function(e){return h(a).then(c)}));var t}},"X"),s.a.createElement("p",null,e.body))})):s.a.createElement(d,null))),s.a.createElement("section",null,s.a.createElement("div",{className:"postDetails__form-wrapper"},s.a.createElement(C,{postId:a,setPostComments:c}))))});N.defaultProps={postBody:""};a(20),a(21);var y=function(){var e,t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)([]),u=Object(i.a)(r,2),b=u[0],f=u[1],h=Object(n.useState)(0),v=Object(i.a)(h,2),C=v[0],y=v[1],j=Object(n.useState)([]),O=Object(i.a)(j,2),g=O[0],S=O[1],L=Object(n.useState)(!1),w=Object(i.a)(L,2),I=w[0],P=w[1],D=Object(n.useState)(!1),k=Object(i.a)(D,2),x=k[0],F=k[1],q=Object(n.useState)(!1),R=Object(i.a)(q,2),B=R[0],V=R[1];Object(n.useEffect)((function(){Object(l.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!1),e.next=3,fetch("".concat(E,"/posts")).then((function(e){return e.json()})).catch((function(e){return e})).then((function(e){c(e),f(e)}));case 3:F(!0);case 4:case"end":return e.stop()}}),e)})))()}),[]);return s.a.createElement("div",{className:"app"},s.a.createElement("header",{className:"app__header"},s.a.createElement("label",null,"Select a user: \xa0",s.a.createElement("select",{className:"app__user-selector",onChange:function(e){var t=+e.target.value;f(0===t?o:o.filter((function(e){return e.userId===t})))}},s.a.createElement("option",{value:"0"},"All users"),s.a.createElement("option",{value:"1"},"Leanne Graham"),s.a.createElement("option",{value:"2"},"Ervin Howell"),s.a.createElement("option",{value:"3"},"Clementine Bauch"),s.a.createElement("option",{value:"4"},"Patricia Lebsack"),s.a.createElement("option",{value:"5"},"Chelsey Dietrich"),s.a.createElement("option",{value:"6"},"Mrs. Dennis Schulist"),s.a.createElement("option",{value:"7"},"Kurtis Weissnat"),s.a.createElement("option",{value:"8"},"Nicholas Runolfsdottir V"),s.a.createElement("option",{value:"9"},"Glenna Reichert"),s.a.createElement("option",{value:"10"},"Leanne Graham")))),s.a.createElement("main",{className:"app__main"},s.a.createElement("div",{className:"app__content"},x?s.a.createElement(_,{posts:b,postId:C,changeSidebarVisibility:function(e){C!==e?(y(e),P(!0)):(y(0),P(!1))},setPostComments:S,isCommentsLoaded:B,changeCommentsLoaded:V}):s.a.createElement(d,null)),s.a.createElement("div",{className:p()({app__sidebar:!0,hidden:!I})},s.a.createElement(N,{postComments:g,postId:C,postBody:null===(e=b[C])||void 0===e?void 0:e.body,setPostComments:S,isCommentsLoaded:B}))))};c.a.render(s.a.createElement(y,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.b9e454b9.chunk.js.map